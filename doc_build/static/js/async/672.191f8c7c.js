"use strict";(self.webpackChunkrspress=self.webpackChunkrspress||[]).push([["672"],{28:function(e,i,n){n.r(i),n.d(i,{default:()=>d});var s=n(5893),t=n(65);function r(e){let i=Object.assign({ul:"ul",li:"li",strong:"strong",h2:"h2",a:"a",p:"p",h3:"h3",code:"code"},(0,t.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.strong,{children:"LIP: 8"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.strong,{children:"Layer: Application"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.strong,{children:"Title: LEA WebAssembly VM's Supported Features"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.strong,{children:"Author: Allwin Ketnawang"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.strong,{children:"Created: 2025-07-11"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.strong,{children:"Status: Draft"})}),"\n"]}),"\n",(0,s.jsxs)(i.h2,{id:"abstract",children:["Abstract",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#abstract",children:"#"})]}),"\n",(0,s.jsx)(i.p,{children:"This LIP provides a technical explanation of the supported and unsupported WebAssembly (WASM) features in the LEA Virtual Machine. It clarifies which features are enabled to ensure deterministic execution and high security, and which are disabled to prevent non-determinism and potential consensus failures. This document serves as a guide for developers building applications on the LEA platform."}),"\n",(0,s.jsxs)(i.h2,{id:"motivation",children:["Motivation",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#motivation",children:"#"})]}),"\n",(0,s.jsx)(i.p,{children:"The LEA WebAssembly (WASM) Virtual Machine is a specialized runtime designed for environments that demand high security and deterministic execution, LEA VM's feature set is tailored to ensure that every operation produces an identical result across all nodes in a network, which is critical for achieving consensus. A clear specification of supported features is necessary for developers to build compatible and secure smart contracts."}),"\n",(0,s.jsxs)(i.h2,{id:"specification",children:["Specification",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#specification",children:"#"})]}),"\n",(0,s.jsx)(i.p,{children:"Based on the requirements for determinism and security, the LEA VM supports a core set of stable, deterministic WebAssembly features while actively disabling experimental or non-deterministic ones."}),"\n",(0,s.jsxs)(i.h3,{id:"supported-and-recommended-features",children:["Supported and Recommended Features",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#supported-and-recommended-features",children:"#"})]}),"\n",(0,s.jsx)(i.p,{children:"The LEA VM is optimized for safety and predictability. The following WebAssembly features are considered safe and are supported:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"-mbulk-memory:"})," This feature is fully supported. It provides highly efficient methods for managing and manipulating large blocks of memory, such as ",(0,s.jsx)(i.code,{children:"memory.copy"})," and ",(0,s.jsx)(i.code,{children:"memory.fill"}),". These operations are deterministic and significantly improve performance for memory-intensive tasks without compromising consensus."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"-msign-ext:"})," Support for sign-extension operations is included. This allows for the correct and predictable conversion between integer types of different sizes (e.g., from an 8-bit integer to a 32-bit integer), which is a fundamental and stable part of the WebAssembly specification."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"-mmultivalue:"})," The LEA VM supports returning multiple values from a single function. This is a widely adopted and stable feature that helps developers write cleaner and more efficient code. For example, a function in Rust returning a tuple ",(0,s.jsx)(i.code,{children:"(i32, i32)"})," will compile correctly. To ensure this works when compiling with Clang-based tools (like rustc), the compiler must be configured with the appropriate ABI flags (",(0,s.jsx)(i.code,{children:"-Xclang -target-abi -Xclang experimental-mv"}),")."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.h3,{id:"unsupported-and-discouraged-features",children:["Unsupported and Discouraged Features",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#unsupported-and-discouraged-features",children:"#"})]}),"\n",(0,s.jsx)(i.p,{children:"To maintain determinism and security, the LEA VM explicitly avoids features that could introduce unpredictable behavior or security risks. The following are not supported:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"-msimd128:"})," SIMD (Single Instruction, Multiple Data) operations are disabled. While powerful for multimedia and scientific computing, their results can vary subtly across different CPU architectures, making them unsuitable for consensus-critical applications."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"-matomics:"})," Threading and atomic operations are not supported. Blockchain smart contracts are single-threaded by design. Introducing atomics or shared memory would break this model and introduce significant complexity and consensus risks."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"-mnontrapping-fptoint:"})," This feature, which prevents crashes on invalid floating-point to integer conversions, is disabled. In a deterministic system, such invalid operations must be handled as explicit, predictable traps (errors) rather than producing a default value, which could lead to state divergence."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Experimental Proposals:"})," Any features that are still experimental or subject to change are not supported. This includes:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"-mreference-types:"})," Introduces garbage collection and complex reference handling, which are not yet considered deterministic or secure enough for blockchain VMs."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"-mtail-call:"})," A proposal for optimizing function calls that has unclear and potentially non-deterministic behavior regarding the call stack."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.h2,{id:"rationale",children:["Rationale",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#rationale",children:"#"})]}),"\n",(0,s.jsxs)(i.p,{children:["The selection of WASM features is strictly guided by the core requirements of a blockchain environment: determinism, security, and consensus. The enabled features (",(0,s.jsx)(i.code,{children:"bulk-memory"}),", ",(0,s.jsx)(i.code,{children:"sign-ext"}),", ",(0,s.jsx)(i.code,{children:"multivalue"}),") are all stable, well-defined, and guaranteed to produce identical results on any compliant hardware. Features like SIMD and atomics are disabled because they can introduce implementation-defined behavior or break the single-threaded execution model, which would make it impossible to guarantee consensus. By restricting the VM to a core, stable, and deterministic subset of WebAssembly, the LEA platform ensures a robust and secure foundation for smart contracts."]}),"\n",(0,s.jsxs)(i.h2,{id:"backwards-compatibility",children:["Backwards Compatibility",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#backwards-compatibility",children:"#"})]}),"\n",(0,s.jsx)(i.p,{children:"This LIP is purely informational and defines the capabilities of the LEA VM. It does not introduce any backwards compatibility issues with the LEA protocol itself."}),"\n",(0,s.jsxs)(i.h2,{id:"security-considerations",children:["Security Considerations",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#security-considerations",children:"#"})]}),"\n",(0,s.jsx)(i.p,{children:"The feature set described in this LIP is fundamental to the security model of the LEA platform. By disabling non-deterministic and experimental features, the VM reduces the attack surface and prevents a class of vulnerabilities related to state divergence and consensus splits. Adherence to this specified feature set is critical for maintaining the security and integrity of all applications running on the LEA network."}),"\n",(0,s.jsxs)(i.h2,{id:"copyright",children:["Copyright",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#copyright",children:"#"})]}),"\n",(0,s.jsxs)(i.p,{children:["This LIP is licensed under the MIT License, in alignment with the main ",(0,s.jsx)(i.a,{href:"https://getlea.org",target:"_blank",rel:"noopener noreferrer",children:"LEA Project"})," License."]})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:i}=Object.assign({},(0,t.ah)(),e.components);return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}let d=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["lips%2FLIP-0008.md"]={toc:[{text:"Abstract",id:"abstract",depth:2},{text:"Motivation",id:"motivation",depth:2},{text:"Specification",id:"specification",depth:2},{text:"Supported and Recommended Features",id:"supported-and-recommended-features",depth:3},{text:"Unsupported and Discouraged Features",id:"unsupported-and-discouraged-features",depth:3},{text:"Rationale",id:"rationale",depth:2},{text:"Backwards Compatibility",id:"backwards-compatibility",depth:2},{text:"Security Considerations",id:"security-considerations",depth:2},{text:"Copyright",id:"copyright",depth:2}],title:"",headingTitle:"",frontmatter:{}}}}]);